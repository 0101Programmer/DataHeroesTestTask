<h1>Тестовое задание для вакансии "Junior, Junior+ аналитик"</h1>
<h2>Уровень 1</h2>
<h3>Сделать на основе данных визуализацию. Например, построить график средней посещаемости по дням.</h3>
<hr>
<h3>Результат:</h3>

![Figure_1](https://github.com/user-attachments/assets/01a36fe0-2d21-426c-858d-d63c6d502117)

<h3>Разбор кода из файла "task_1.py"</h3>

![Снимок экрана 2025-02-08 133839](https://github.com/user-attachments/assets/cfe26b09-4ccc-4656-b783-4429d6f0513a)

<h4>Реализация задания основана на создании класса,  в котором есть несколько функций:</h4>
<p>
  "data_converter" - функция для конвертации CSV файла в датафрейм Pandas.<br>
  В ней указывается путь до нужного датасета в формате CVS, по этому файлу создаётся датафрейм Pandas с использованием только двух колонок:<br>
  "event_date" и "is_attend"<br>
  Потом происходит группировка по датам, отсечение повторяющихся, а в последнем столбце указывается сумма посещений за день (чел.)
</p>
<p>
  "addlabels" - функция для добавления значений на столбцы диаграммы (сколько чел. пришло за конкретную дату)<br>
  В диапазоне по оси x (общее количество дат в датафрейме) происходит итерация по каждой дате и добавление на столбец значения по оси y (кол-во пришедших человек в этот день) этой даты
</p>
<p>
  "graph_maker" - функция для построения и отображения столбчатой диаграммы по сгруппированному датасету<br>
  Сначала запускается функция конвертации CSV файла в датафрейм Pandas<br>
  Потом задаются данные для отрисовки столбачтой диаграммы, в т.ч. меняется ориентация подписей по оси Х для улучшения отображения,<br>
  добавляются подписи осей, вызывается ф-ция "tight_layout" чтобы диаграмма не уходила за рамки и все данные были видны, в конце добавляются значения на столюцы диаграммы
</p>

<h4>После создания экземпляра класса вызывается его функция по созданию графика, после чего он отображается</h4>

![Снимок экрана 2025-02-08 134245](https://github.com/user-attachments/assets/dba13bd6-0ab0-4afa-b8e3-42003f3e2d75)

<h2>Уровень 2</h2>
<h3>Взять данные из гугл-таблицы и сделать какой-то SQL-запрос. Например, посчитать среднюю посещаемость по каждой из тренировок.</h3>
<hr>
<h3>Результат:</h3>

![Figure_2](https://github.com/user-attachments/assets/2944e23d-4b11-43b2-8875-b3ef1fa7701c)

<h3>Разбор кода из файла "task_2.py"</h3>

<h4>
  Реализация задания основана на подключении к базе данных PostgreSQL, создании в ней пустой таблицы по схеме существующей гугл-таблицы, копирование существующей таблицы в БД, осуществление запросов через psycopg2
  <br>
  и sqlalchemy. Отображение происходит, как и в первом задании, посредством библиотек "matplotlib" и "pandas".
</h4>

![Снимок экрана 2025-02-08 135949](https://github.com/user-attachments/assets/05642497-a17a-4379-85db-2bd27722deb6)

<p>Сначала импортирутся необходимые библиотеки, определяется путь к CSV файлу с данными, создаётся знакомая функция для добавления значений на столбцы диаграммы,<br>
далее происходит создание движка для последеющего импорта данных из PostgreSQL в Pandas с сохранением названий столбцов в коде ниже. После чего создаётся соединение с БД Постгре через psycopg2</p>

<hr>

![Снимок экрана 2025-02-08 153504](https://github.com/user-attachments/assets/c683d999-93c9-4459-a887-db9cefe74dd0)

<p>
  С помощью конструкции "with ..." создаётся таблица для копирования в неё существующего CSV файла, потом выполняется запрос "copy_file_query" на заполнение таблицы данными из CSV файла (делается 1 раз, чтобы не было повторного копирования всех данных), далее пишется запрос по выбору колонок "event_id" и "is_attend" и по этому запросу создаётся датафрейм. 
</p>

<hr>

![Снимок экрана 2025-02-08 153948](https://github.com/user-attachments/assets/55dc5be4-db78-46a1-8691-cbed07ec0ca2)

<p>
  Заключительная часть кода отрисовывает график и закрывает соединение с БД
</p>






